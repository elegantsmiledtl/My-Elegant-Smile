(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[637],{8258:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var s=a(95155),r=a(12115),l=a(20063),d=a(41307),i=a(86948);let n=(0,a(14294).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var o=a(28127),c=a(3998),m=a(14585),u=a(15894),f=a(76604),p=a(65142),h=a(11186),x=a(19056),y=a(14223);function j(){let e=(0,l.useParams)(),t=e.dentistName?decodeURIComponent(e.dentistName):"",[a,j]=(0,r.useState)([]),[N,b]=(0,r.useState)(!1),{toast:g}=(0,u.dj)(),[w,v]=(0,r.useState)(""),[A,M]=(0,r.useState)("all"),C=e=>{console.error("Firebase Error:",e);let t="An unexpected error occurred.";"permission-denied"===e.code&&(t="You have insufficient permissions to access the database. Please update your Firestore security rules in the Firebase console."),g({variant:"destructive",title:"Database Error",description:t,action:"permission-denied"===e.code?(0,s.jsx)("a",{href:"https://console.firebase.google.com/project/elegant-smile-r6jex/firestore/rules",target:"_blank",rel:"noopener noreferrer",children:(0,s.jsx)(c.$,{variant:"secondary",children:"Fix Rules"})}):void 0})},R=(0,r.useCallback)(async()=>{if(t)try{let e=await (0,m.eB)(t);j(e)}catch(e){C(e)}},[t,g]);(0,r.useEffect)(()=>{b(!0),R()},[R]);let k=async(e,t)=>{try{await (0,m.IH)(e,t),g({title:"Deletion Requested",description:"The owner has been notified of your request to delete this case."}),R()}catch(e){C(e)}},D=(0,r.useMemo)(()=>{let e=new Set;return a.forEach(t=>{if(t.createdAt){let a=t.createdAt.toDate?t.createdAt.toDate():(0,x.H)(t.createdAt);e.add((0,y.GP)(a,"yyyy-MM"))}}),Array.from(e).sort().reverse()},[a]),q=(0,r.useMemo)(()=>a.filter(e=>{if(e.deletionRequested&&e.isDeleted)return!1;let t=e.patientName.toLowerCase().includes(w.toLowerCase()),a="all"===A||e.createdAt&&(0,y.GP)(e.createdAt.toDate?e.createdAt.toDate():(0,x.H)(e.createdAt),"yyyy-MM")===A;return t&&a}),[a,w,A,t]);if(!N)return null;let P=["Dr.Ibraheem Omar","Dr.Mahmod Mishael"].includes(t);return(0,s.jsxs)("div",{className:"min-h-screen bg-background text-foreground",children:[(0,s.jsx)("header",{className:"bg-card border-b shadow-sm p-4",children:(0,s.jsxs)("div",{className:"container mx-auto grid grid-cols-3 items-center",children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(f.default,{width:150,height:40})}),(0,s.jsx)("div",{className:"flex justify-end"})]})}),(0,s.jsx)("main",{className:"p-4 sm:p-6 lg:p-8",children:(0,s.jsxs)(i.Zp,{className:"shadow-lg",children:[(0,s.jsx)(i.aR,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 items-start",children:[(0,s.jsx)(i.ZB,{children:"My Case History"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 items-start",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(p.p,{placeholder:"Search by patient...",value:w,onChange:e=>v(e.target.value),className:"pl-10 w-[250px]"})]}),(0,s.jsxs)(h.l6,{value:A,onValueChange:M,children:[(0,s.jsxs)(h.bq,{className:"w-[250px]",children:[(0,s.jsx)(o.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)(h.yv,{placeholder:"Filter by month..."})]}),(0,s.jsxs)(h.gC,{children:[(0,s.jsx)(h.eb,{value:"all",children:"All Months"}),D.map(e=>(0,s.jsx)(h.eb,{value:e,children:(0,y.GP)((0,x.H)("".concat(e,"-01")),"MMMM yyyy")},e))]})]})]})]})}),(0,s.jsx)(i.Wu,{className:"pt-0",children:(0,s.jsx)(d.A,{cases:q,onDeletionRequest:P?k:void 0,highlightDeleted:!1})})]})})]})}},11186:(e,t,a)=>{"use strict";a.d(t,{bq:()=>u,eb:()=>x,gC:()=>h,l6:()=>c,yv:()=>m});var s=a(95155),r=a(12115),l=a(4729),d=a(59007),i=a(42614),n=a(72251),o=a(64269);let c=l.bL;l.YJ;let m=l.WT,u=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(l.l9,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[r,(0,s.jsx)(l.In,{asChild:!0,children:(0,s.jsx)(d.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.l9.displayName;let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})});f.displayName=l.PP.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})});p.displayName=l.wn.displayName;let h=r.forwardRef((e,t)=>{let{className:a,children:r,position:d="popper",...i}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsxs)(l.UC,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===d&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:d,...i,children:[(0,s.jsx)(f,{}),(0,s.jsx)(l.LM,{className:(0,o.cn)("p-1","popper"===d&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(p,{})]})})});h.displayName=l.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=l.JU.displayName;let x=r.forwardRef((e,t)=>{let{className:a,children:r,...d}=e;return(0,s.jsxs)(l.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...d,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})}),(0,s.jsx)(l.p4,{children:r})]})});x.displayName=l.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=l.wv.displayName},24752:(e,t,a)=>{Promise.resolve().then(a.bind(a,8258))}},e=>{e.O(0,[992,481,368,524,746,312,498,88,782,665,689,307,441,255,358],()=>e(e.s=24752)),_N_E=e.O()}]);